#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>
#include <Servo.h>
#include <SoftwareSerial.h>

SoftwareSerial BT(2, 3);
Adafruit_SSD1306 d(128, 64, &Wire);
Servo s;

int anguloAberto = 160;
int anguloFechado = 20;
bool estado = false;

void setup() {
  Wire.begin();
  d.begin(SSD1306_SWITCHCAPVCC, 0x3C);
  d.clearDisplay();
  d.display();
  s.attach(11);
  BT.begin(9600);
}

void loop() {
  if (BT.available()) {
    char c = BT.read();
    if (c == 'A') {
      s.write(anguloAberto);
      estado = true;
    }
    if (c == 'F') {
      s.write(anguloFechado);
      estado = false;
    }
  }

  d.clearDisplay();
  d.setTextSize(2);
  d.setTextColor(SSD1306_WHITE);
  d.setCursor(0, 0);
  if (estado) d.print("Aberto");
  else d.print("Fechado");
  d.display();

  delay(50);
}
